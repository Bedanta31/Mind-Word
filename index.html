<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Word Finder Game</title>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDqsWJgwX-vWIawPZt0XTnQHSE9AqwczkE",
      authDomain: "word-finder-346db.firebaseapp.com",
      projectId: "word-finder-346db",
      storageBucket: "word-finder-346db.appspot.com",
      messagingSenderId: "129230255125",
      appId: "1:129230255125:web:39632d82bb30c55c318a1c"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.auth = auth;
    window.onAuthStateChanged = onAuthStateChanged;
  </script>

  <!-- External CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Confetti Effect -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
  <!-- ðŸ” Auth Screen -->
  <div id="auth-screen" class="screen active">
  <h1>Word Finder</h1>

  <input id="auth-email" placeholder="Email" />
  <input id="auth-password" type="password" placeholder="Password" />
  <br />

  <button onclick="signup()">Sign Up</button>
  <button onclick="login()">Login</button>
</div>

  <!-- ðŸŽ¯ Start Screen -->
  <div id="start-screen" class="screen">
    <h2>Welcome</h2>
    <div id="selected-level">Selected: Easy</div>
    <button onclick="selectLevel('easy')">Easy</button>
    <button onclick="selectLevel('medium')">Medium</button>
    <button onclick="selectLevel('hard')">Hard</button>
    <button onclick="startGame()">Start Game</button>
    <button onclick="showProfile()">Profile</button>
    <button onclick="showMessages()">ðŸ“© Messages</button>
    <button onclick="confirmLogout()">Logout</button>
    <div id="leaderboard"></div>
  </div>

  <!-- ðŸ§  Game Screen -->
  <div id="game-screen" class="screen">
    <h2>Find the Words!</h2>
    <div>Time Left: <span id="timer">0</span>s</div>
    <div>Score: <span id="score">0</span></div>
    <div>Words: <span id="words"></span></div>
    <div class="grid-wrapper"><div id="grid"></div></div>
  </div>

  <!-- ðŸ“± Profile -->
  <div id="profile-screen" class="screen">
    <h2>ðŸ‘¤ Profile</h2>
    <div>Username: <span id="profile-username"></span></div>
    <div>ðŸ’µ Wallet: <span id="profile-cash"></span></div>
    <button onclick="requestWithdrawal()">Withdraw</button>
    <button onclick="changeName()">Change Name</button>
    <button onclick="changeAvatar()">Change Avatar</button>
    <button onclick="confirmDeleteUser()">Delete Me</button>
    <button onclick="goToLevelSelect()">â¬… Back</button>
  </div>

  <!-- ðŸŽ‰ End Screen -->
  <div id="end-screen" class="screen">
    <h1>Game Over!</h1>
    <div>Your Score: <span id="final-score"></span></div>
    <button onclick="goToLevelSelect()">Play Again</button>
  </div>

  <!-- ðŸ’¬ Messages -->
  <div id="message-screen" class="screen">
    <h2>Your Messages</h2>
    <div id="message-list"></div>
    <button onclick="goToLevelSelect()">â¬… Back</button>
  </div>

  <!-- ðŸ”´ Error popup -->
  <div id="error-popup" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
  background:#dc3545;color:white;padding:10px 20px;border-radius:10px;font-size:18px;z-index:999;">
    Error
  </div>

  <!-- Logout confirmation -->
  <div id="logout-popup" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
  background:white;padding:20px;border-radius:10px;border:2px solid #333;z-index:999;">
    <h3>Are you sure you want to logout?</h3>
    <button onclick="logoutUser()">Yes</button>
    <button onclick="cancelLogout()">No</button>
  </div>

  <!-- JS File (modular) -->
  <script type="module" src="script.js"></script>
</body>
</html>
